(()=>{function ne(e,t,s){let a=e.dataset.dselectValue,n=e.closest(`.${t}`).previousElementSibling,o=n.nextElementSibling.getElementsByClassName(s)[0],p=n.nextElementSibling.querySelector("input");n.multiple?Array.from(n.options).filter(c=>c.value===a)[0].selected=!0:n.value=a,n.multiple&&o.click(),n.dispatchEvent(new Event("change")),o.focus(),p&&(p.value="")}function ae(e,t,s){let a=e.parentNode.dataset.dselectValue,n=e.closest(`.${t}`).previousElementSibling,o=n.nextElementSibling.getElementsByClassName(s)[0],p=n.nextElementSibling.querySelector("input");Array.from(n.options).filter(c=>c.value===a)[0].selected=!1,n.dispatchEvent(new Event("change")),o.click(),p&&(p.value="")}function oe(e,t,s,a,n,o){let p=t.value.toLowerCase().trim(),c=t.nextElementSibling,$=Array.from(c.querySelectorAll(".dropdown-header")),y=Array.from(c.querySelectorAll(".dropdown-item")),b=c.nextElementSibling;if($.forEach(l=>l.classList.add("d-none")),y.forEach(l=>{let w=l.textContent.toLowerCase().includes(p);if(l.classList.toggle("d-none",!w),w){let d=l.previousElementSibling;for(;d&&!d.classList.contains("dropdown-header");)d.classList.remove("d-none"),d=d.previousElementSibling}}),$.forEach(l=>{let w=l.textContent.toLowerCase().includes(p);if(l.classList.toggle("d-none",!w),w){let d=l.nextElementSibling;for(;d&&!d.classList.contains("dropdown-header");)d.classList.remove("d-none"),d=d.nextElementSibling}}),y.filter(l=>!l.classList.contains("d-none")&&!l.hasAttribute("hidden")).length===0){if(b.classList.remove("d-none"),c.classList.add("d-none"),n&&(b.innerHTML=o.replace("[searched-term]",t.value),e.key==="Enter")){let l=t.closest(`.${s}`).previousElementSibling,h=l.nextElementSibling.querySelector(`.${a}`);l.insertAdjacentHTML("afterbegin",`<option value="${t.value}" selected>${t.value}</option>`),l.dispatchEvent(new Event("change")),t.value="",t.dispatchEvent(new Event("keyup")),h.click(),h.focus()}}else b.classList.add("d-none"),c.classList.remove("d-none")}function le(e,t){let s=e.closest(`.${t}`).previousElementSibling;Array.from(s.options).forEach(a=>a.selected=!1),s.dispatchEvent(new Event("change"))}function re(e,t={}){e.style.display="none";let s="dselect-wrapper",a="dselect-no-results",n="dselect-tag-remove",o="dselect-tag",p="dselect-placeholder",c="dselect-clear",$="dselect-clearable",y="text-bg-dark bg-gradient",b=!1,T=!1,l=!1,h="360px",w="",d="",k="Search..",P="Press Enter to add &quot;<strong>[searched-term]</strong>&quot;",H="No results found",A=q("search")||t.search||b,O=q("creatable")||t.creatable||T,r=q("clearable")||t.clearable||l,f=e.dataset.dselectMaxHeight||t.maxHeight||h,v=e.dataset.dselectClassTag||t.classTag||y,B=`${o} ${v}`,E=e.dataset.dselectSearchPlaceholder||t.searchPlaceholder||k,z=e.dataset.dselectNoResultsPlaceholder||t.noResultsPlaceholder||H,C=e.dataset.dselectAddOptionPlaceholder||t.addOptionPlaceholder||P,R=e.dataset.dselectItemClass||t.ItemClass||d,L=e.dataset.dselectSize||t.size||w,x=`form-select${L!==""?` form-select-${L}`:""}`,j=A?`<input onkeydown="return event.key !== 'Enter'" onkeyup="dselectSearch(event, this, '${s}', '${x}', ${O}, '${C}')" type="text" class="form-control" placeholder="${E}" autofocus>`:"";function q(u){let m=`data-dselect-${u}`;return e.hasAttribute(m)?e.getAttribute(m).toLowerCase()==="true":null}function Q(){e.nextElementSibling&&e.nextElementSibling.classList&&e.nextElementSibling.classList.contains(s)&&e.nextElementSibling.remove()}function M(u){return u.getAttribute("value")===""}function G(u,m){if(m){let i=Array.from(u).filter(g=>g.selected&&!M(g)),S=Array.from(u).filter(g=>M(g)),I=[];if(i.length===0){let g=S.length?S[0].textContent:"&nbsp;";I.push(`<span class="${p}">${g}</span>`)}else for(let g of i)I.push(`
            <div class="${B}" data-dselect-value="${g.value}">
              ${g.text}
              <svg onclick="dselectRemoveTag(this, '${s}', '${x}')" class="${n}" width="14" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>
            </div>
          `);return I.join("")}else{let i=u[u.selectedIndex];return M(i)?`<span class="${p}">${i.innerHTML}</span>`:i.innerHTML}}function F(u){let m=u[u.selectedIndex];return M(m)?"":m.textContent}function J(u){let m=[];for(let i of u)if(i.tagName==="OPTGROUP")m.push(`<h6 class="dropdown-header">${i.getAttribute("label")}</h6>`);else{let S=M(i)?" hidden":"",I=i.selected?" active":"",g=i.selected?" disabled":"",_=i.getAttribute("disabled"),ee=R===""?"":" "+R,D="";_!==null?D="disabled='true'":D="";let te=i.value,N=i.textContent;if(i.hasAttribute("data-dselect-img")&&i.getAttribute("data-dselect-img").trim()!==""){let se=i.getAttribute("data-dselect-img").trim(),U="1rem";L=="sm"?U=".7rem":L=="lg"&&(U="1.2rem"),N=`<span class="d-flex align-items-center">
            <img src="${se}" style="max-height:${U}; width:auto;">
            <span class="ps-2">${N}</span>
          </span>`}m.push(`<button${S} class="dropdown-item${I}${ee}"  ${D} data-dselect-value="${te}" type="button" onclick="dselectUpdate(this, '${s}', '${x}')" ${g}>
          ${N}
        </button>`)}return m=m.join(""),m}function X(){let u=e.multiple?' data-bs-auto-close="outside"':"",m=Array.from(e.classList).filter(g=>g!=="form-select"&&g!=="form-select-sm"&&g!=="form-select-lg").join(" "),i=r&&!e.multiple?`
    <button type="button" class="btn ${c}" title="Clear selection" onclick="dselectClear(this, '${s}')">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
        <path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
        <path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
      </svg>
    </button>
    `:"",S=`
    <div class="dropdown ${s} ${m}">
      <button class="${x} ${!e.multiple&&r?$:""}" data-dselect-text="${!e.multiple&&F(e.options)}" type="button" data-bs-toggle="dropdown" aria-expanded="false"${u}>
        ${G(e.options,e.multiple)}
      </button>
      <div class="dropdown-menu">
        <div class="d-flex flex-column">
          ${j}
          <div class="dselect-items" style="max-height:${f};overflow:auto">
            ${J(e.querySelectorAll("*"))}
          </div>
          <div class="${a} d-none">${z}</div>
        </div>
      </div>
      ${i}
    </div>
    `;Q(),e.insertAdjacentHTML("afterend",S),e.nextElementSibling.addEventListener("shown.bs.dropdown",function(){let g=this.querySelector('input[type="text"]');g&&g.focus()})}X();function Z(){let u=e.nextElementSibling,m=u.getElementsByClassName(x)[0],i=u.getElementsByClassName("dselect-items")[0];m.innerHTML=G(e.options,e.multiple),i.innerHTML=J(e.querySelectorAll("*")),e.multiple||(m.dataset.dselectText=F(e.options))}e.addEventListener("change",Z)}typeof window<"u"&&(window.dselectUpdate=ne,window.dselectRemoveTag=ae,window.dselectSearch=oe,window.dselectClear=le,window.dselect=re);function W(e,t){let s=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),p=new Date,c=p.toLocaleString();return s.classList.add("d-flex"),a.classList.add("flex-shrink-0","text-center"),n.classList.add("text-secondary","border-top","border-secondary","text-right","fs-6"),n.innerHTML=c,e==="ai"?(o.classList.add("shadow","flex-grow-1","ms-3","border","rounded","p-2","mb-2","ai-chat","bg-body-tertiary"),a.classList.add("order-0"),a.innerHTML='<img src="/assets/svg/ai-82ab00.svg" alt="ai" style="max-width:75px; height:auto;">'):(o.classList.add("shadow","flex-grow-1","me-3","border","rounded","p-2","mb-2","user-chat","bg-secondary-subtle"),a.classList.add("order-1"),a.innerHTML='<img src="/assets/svg/me-82ab00.svg" alt="ai" style="max-width:75px; height:auto;">'),o.innerHTML=t,o.append(n),s.append(a),s.append(o),s}async function ie(e,t){let s=[];return s.prompt=await ce(e),s.model=await de(t),s}var Y={"Advanced Coding Guru":"You are an advanced expert guru at all coding capabilities. While enforcing the use of tabs for indentation, you have a strong abbility to ensure the code you're writing is up to date with the newest versions of all languages, and using the newest features, and ensuring that the code you write is up to the standards for 2024 satisfaction. If you're unsure of any features, you will ask prior to writing the code."};async function ce(e){let s=await(await fetch("assets/data/prompts.json")).json();return console.log("prompts"),console.log(s),Object.entries(await s).forEach(([a,n])=>{let o=document.createElement("option");o.value=a,o.text=a,e.appendChild(o),Y[a]=n}),dselect(e),e}var K={};async function de(e){let s=await(await fetch("assets/data/models.json")).json();return Object.entries(s).forEach(([a,n])=>{let o=document.createElement("option");o.value=a,o.text=n.name,o.setAttribute("data-dselect-img",n.img),e.appendChild(o),K[a]=n}),dselect(e),e}document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("chat-form"),t=document.getElementById("chatMsg"),s=document.getElementById("resp"),a=document.getElementById("chat-box"),n=document.getElementById("loading-icon"),o=document.getElementById("prompt-preset-select"),p=document.getElementById("systemPrompt"),c=document.getElementById("model-preset-select"),$=document.getElementById("type-model"),y=document.getElementById("sidePanel"),b=document.getElementById("settings-btn"),T=document.getElementById("to-do-list"),l=document.getElementById("to-do-btn"),h=document.getElementById("main-chat");e.addEventListener("submit",async r=>{r.preventDefault();let f=t.value;n.classList.remove("d-none");let v=marked.parse(f),B=W("user",v);a.insertBefore(B,s);let E=new FormData;E.append("model",c.value),E.append("prompt",p.value);let z=Object.fromEntries(E);try{let C=await fetch("/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(!C.ok)throw new Error("Network response was not ok.");t.value="";let R=new Event("input",{bubbles:!0});t.dispatchEvent(R);let L=await C.json();console.log(JSON.stringify(L));let V=marked.parse(L.aiResp),x=W("ai",V);a.insertBefore(x,s),a.querySelectorAll("pre code").forEach(j=>{hljs.highlightElement(j)}),n.classList.add("d-none")}catch(C){console.error("Error:",C)}}),ie(o,c),o.addEventListener("change",async r=>{p.value=Y[r.target.value]}),c.addEventListener("change",async r=>{$.innerHTML=`<img style="height:23px; width:auto;" src="${K[c.value].img}" alt="Model">`}),t.addEventListener("input",function(){this.style.height="auto";let r=Math.min(this.scrollHeight,window.innerHeight*.4);this.style.height=r+"px"}),Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(r=>{new bootstrap.Tooltip(r)});function d(r){let f=parseInt(h.getAttribute("data-yo-col")),v=r=="up"?f+3:f-3;h.classList.remove("col-"+f),h.classList.add("col-"+v),h.setAttribute("data-yo-col",v)}y.addEventListener("show.bs.collapse",r=>{b.classList.toggle("btn-primary"),b.classList.toggle("btn-outline-primary"),y.classList.toggle("font-zero"),d("down")}),y.addEventListener("hide.bs.collapse",r=>{b.classList.toggle("btn-primary"),b.classList.toggle("btn-outline-primary"),y.classList.toggle("font-zero"),d("up")}),T.addEventListener("show.bs.collapse",r=>{l.classList.toggle("btn-primary"),l.classList.toggle("btn-outline-primary"),l.classList.toggle("font-zero"),d("down")}),T.addEventListener("hide.bs.collapse",r=>{l.classList.toggle("btn-primary"),l.classList.toggle("btn-outline-primary"),l.classList.toggle("font-zero"),d("up")});document.getElementById("bgColor").addEventListener("input",function(){document.body.style.backgroundColor=this.value});let k=document.getElementById("gradientStart"),P=document.getElementById("gradientEnd"),H=document.getElementById("gradientOpacity");k.addEventListener("input",A),P.addEventListener("input",A),H.addEventListener("input",A);function A(){let r=k.value,f=P.value,v=H.value;document.body.style.backgroundImage=`linear-gradient(to right, ${O(r,v)}, ${O(f,v)})`}function O(r,f){let v=parseInt(r.slice(1,3),16),B=parseInt(r.slice(3,5),16),E=parseInt(r.slice(5,7),16);return`rgba(${v}, ${B}, ${E}, ${f})`}});})();
//!-------------------------------------------------------------------!
//!
//!------------------------------------------------------------------------!
