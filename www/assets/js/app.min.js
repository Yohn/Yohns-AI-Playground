(()=>{function ne(e,t,s){let o=e.dataset.dselectValue,n=e.closest(`.${t}`).previousElementSibling,a=n.nextElementSibling.getElementsByClassName(s)[0],c=n.nextElementSibling.querySelector("input");n.multiple?Array.from(n.options).filter(d=>d.value===o)[0].selected=!0:n.value=o,n.multiple&&a.click(),n.dispatchEvent(new Event("change")),a.focus(),c&&(c.value="")}function oe(e,t,s){let o=e.parentNode.dataset.dselectValue,n=e.closest(`.${t}`).previousElementSibling,a=n.nextElementSibling.getElementsByClassName(s)[0],c=n.nextElementSibling.querySelector("input");Array.from(n.options).filter(d=>d.value===o)[0].selected=!1,n.dispatchEvent(new Event("change")),a.click(),c&&(c.value="")}function ae(e,t,s,o,n,a){let c=t.value.toLowerCase().trim(),d=t.nextElementSibling,$=Array.from(d.querySelectorAll(".dropdown-header")),y=Array.from(d.querySelectorAll(".dropdown-item")),b=d.nextElementSibling;if($.forEach(l=>l.classList.add("d-none")),y.forEach(l=>{let w=l.textContent.toLowerCase().includes(c);if(l.classList.toggle("d-none",!w),w){let u=l.previousElementSibling;for(;u&&!u.classList.contains("dropdown-header");)u.classList.remove("d-none"),u=u.previousElementSibling}}),$.forEach(l=>{let w=l.textContent.toLowerCase().includes(c);if(l.classList.toggle("d-none",!w),w){let u=l.nextElementSibling;for(;u&&!u.classList.contains("dropdown-header");)u.classList.remove("d-none"),u=u.nextElementSibling}}),y.filter(l=>!l.classList.contains("d-none")&&!l.hasAttribute("hidden")).length===0){if(b.classList.remove("d-none"),d.classList.add("d-none"),n&&(b.innerHTML=a.replace("[searched-term]",t.value),e.key==="Enter")){let l=t.closest(`.${s}`).previousElementSibling,v=l.nextElementSibling.querySelector(`.${o}`);l.insertAdjacentHTML("afterbegin",`<option value="${t.value}" selected>${t.value}</option>`),l.dispatchEvent(new Event("change")),t.value="",t.dispatchEvent(new Event("keyup")),v.click(),v.focus()}}else b.classList.add("d-none"),d.classList.remove("d-none")}function le(e,t){let s=e.closest(`.${t}`).previousElementSibling;Array.from(s.options).forEach(o=>o.selected=!1),s.dispatchEvent(new Event("change"))}function re(e,t={}){e.style.display="none";let s="dselect-wrapper",o="dselect-no-results",n="dselect-tag-remove",a="dselect-tag",c="dselect-placeholder",d="dselect-clear",$="dselect-clearable",y="text-bg-dark bg-gradient",b=!1,T=!1,l=!1,v="360px",w="",u="",M="Search..",P="Press Enter to add &quot;<strong>[searched-term]</strong>&quot;",H="No results found",A=j("search")||t.search||b,O=j("creatable")||t.creatable||T,r=j("clearable")||t.clearable||l,f=e.dataset.dselectMaxHeight||t.maxHeight||v,h=e.dataset.dselectClassTag||t.classTag||y,B=`${a} ${h}`,E=e.dataset.dselectSearchPlaceholder||t.searchPlaceholder||M,z=e.dataset.dselectNoResultsPlaceholder||t.noResultsPlaceholder||H,C=e.dataset.dselectAddOptionPlaceholder||t.addOptionPlaceholder||P,R=e.dataset.dselectItemClass||t.ItemClass||u,L=e.dataset.dselectSize||t.size||w,x=`form-select${L!==""?` form-select-${L}`:""}`,q=A?`<input onkeydown="return event.key !== 'Enter'" onkeyup="dselectSearch(event, this, '${s}', '${x}', ${O}, '${C}')" type="text" class="form-control" placeholder="${E}" autofocus>`:"";function j(m){let g=`data-dselect-${m}`;return e.hasAttribute(g)?e.getAttribute(g).toLowerCase()==="true":null}function Q(){e.nextElementSibling&&e.nextElementSibling.classList&&e.nextElementSibling.classList.contains(s)&&e.nextElementSibling.remove()}function k(m){return m.getAttribute("value")===""}function F(m,g){if(g){let i=Array.from(m).filter(p=>p.selected&&!k(p)),S=Array.from(m).filter(p=>k(p)),I=[];if(i.length===0){let p=S.length?S[0].textContent:"&nbsp;";I.push(`<span class="${c}">${p}</span>`)}else for(let p of i)I.push(`
						<div class="${B}" data-dselect-value="${p.value}">
							${p.text}
							<svg onclick="dselectRemoveTag(this, '${s}', '${x}')" class="${n}" width="14" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>
						</div>
					`);return I.join("")}else{let i=m[m.selectedIndex];return k(i)?`<span class="${c}">${i.innerHTML}</span>`:i.innerHTML}}function J(m){let g=m[m.selectedIndex];return k(g)?"":g.textContent}function W(m){let g=[];for(let i of m)if(i.tagName==="OPTGROUP")g.push(`<h6 class="dropdown-header">${i.getAttribute("label")}</h6>`);else{let S=k(i)?" hidden":"",I=i.selected?" active":"",p=i.selected?" disabled":"",_=i.getAttribute("disabled"),ee=R===""?"":" "+R,D="";_!==null?D="disabled='true'":D="";let te=i.value,N=i.textContent;if(i.hasAttribute("data-dselect-img")&&i.getAttribute("data-dselect-img").trim()!==""){let se=i.getAttribute("data-dselect-img").trim(),U="1rem";L=="sm"?U=".7rem":L=="lg"&&(U="1.2rem"),N=`<span class="d-flex align-items-center">
						<img src="${se}" style="max-height:${U}; width:auto;">
						<span class="ps-2">${N}</span>
					</span>`}g.push(`<button${S} class="dropdown-item${I}${ee}"	${D} data-dselect-value="${te}" type="button" onclick="dselectUpdate(this, '${s}', '${x}')" ${p}>
					${N}
				</button>`)}return g=g.join(""),g}function X(){let m=e.multiple?' data-bs-auto-close="outside"':"",g=Array.from(e.classList).filter(p=>p!=="form-select"&&p!=="form-select-sm"&&p!=="form-select-lg").join(" "),i=r&&!e.multiple?`
		<button type="button" class="btn ${d}" title="Clear selection" onclick="dselectClear(this, '${s}')">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
				<path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
				<path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
			</svg>
		</button>
		`:"",S=`
		<div class="dropdown ${s} ${g}">
			<button class="${x} ${!e.multiple&&r?$:""}" data-dselect-text="${!e.multiple&&J(e.options)}" type="button" data-bs-toggle="dropdown" aria-expanded="false"${m}>
				${F(e.options,e.multiple)}
			</button>
			<div class="dropdown-menu">
				<div class="d-flex flex-column">
					${q}
					<div class="dselect-items" style="max-height:${f};overflow:auto">
						${W(e.querySelectorAll("*"))}
					</div>
					<div class="${o} d-none">${z}</div>
				</div>
			</div>
			${i}
		</div>
		`;Q(),e.insertAdjacentHTML("afterend",S),e.nextElementSibling.addEventListener("shown.bs.dropdown",function(){let p=this.querySelector('input[type="text"]');p&&p.focus()})}X();function Z(){let m=e.nextElementSibling,g=m.getElementsByClassName(x)[0],i=m.getElementsByClassName("dselect-items")[0];g.innerHTML=F(e.options,e.multiple),i.innerHTML=W(e.querySelectorAll("*")),e.multiple||(g.dataset.dselectText=J(e.options))}e.addEventListener("change",Z)}typeof window<"u"&&(window.dselectUpdate=ne,window.dselectRemoveTag=oe,window.dselectSearch=ae,window.dselectClear=le,window.dselect=re);function Y(e,t){let s=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),c=new Date,d=c.toLocaleString();return s.classList.add("d-flex"),o.classList.add("flex-shrink-0","text-center"),n.classList.add("text-secondary","border-top","border-secondary","text-right","fs-6"),n.innerHTML=d,e==="ai"?(a.classList.add("shadow","flex-grow-1","ms-3","border","rounded","p-2","mb-2","ai-chat","bg-body-tertiary"),o.classList.add("order-0"),o.innerHTML='<img src="/assets/svg/ai-82ab00.svg" alt="ai" style="max-width:75px; height:auto;">'):(a.classList.add("shadow","flex-grow-1","me-3","border","rounded","p-2","mb-2","user-chat","bg-secondary-subtle"),o.classList.add("order-1"),o.innerHTML='<img src="/assets/svg/me-82ab00.svg" alt="ai" style="max-width:75px; height:auto;">'),a.innerHTML=t,a.append(n),s.append(o),s.append(a),s}async function ie(e,t){let s=[];return s.prompt=await ce(e),s.model=await de(t),s}var V={"Advanced Coding Guru":"You are an advanced expert guru at all coding capabilities. While enforcing the use of tabs for indentation, you have a strong abbility to ensure the code you're writing is up to date with the newest versions of all languages, and using the newest features, and ensuring that the code you write is up to the standards for 2024 satisfaction. If you're unsure of any features, you will ask prior to writing the code."};async function ce(e){let s=await(await fetch("assets/data/prompts.json")).json();console.log("prompts"),console.log(s);for(let o in s){let n=document.createElement("optgroup");n.label=o,V[o]={};for(let a in s[o]){let c=document.createElement("option");c.text=a,c.value=a,n.appendChild(c),V[o][a]=s[o][a]}selectElement.appendChild(n)}return dselect(e),e}var K={};async function de(e){let s=await(await fetch("assets/data/models.json")).json();return Object.entries(s).forEach(([o,n])=>{let a=document.createElement("option");a.value=o,a.text=n.name,a.setAttribute("data-dselect-img",n.img),e.appendChild(a),K[o]=n}),dselect(e),e}document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("chat-form"),t=document.getElementById("chatMsg"),s=document.getElementById("resp"),o=document.getElementById("chat-box"),n=document.getElementById("loading-icon"),a=document.getElementById("prompt-preset-select"),c=document.getElementById("systemPrompt"),d=document.getElementById("model-preset-select"),$=document.getElementById("type-model"),y=document.getElementById("sidePanel"),b=document.getElementById("settings-btn"),T=document.getElementById("to-do-list"),l=document.getElementById("to-do-btn"),v=document.getElementById("main-chat");e.addEventListener("submit",async r=>{r.preventDefault();let f=t.value;n.classList.remove("d-none");let h=marked.parse(f),B=Y("user",h);o.insertBefore(B,s);let E=new FormData;E.append("model",d.value),E.append("prompt",c.value);let z=Object.fromEntries(E);try{let C=await fetch("/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(!C.ok)throw new Error("Network response was not ok.");t.value="";let R=new Event("input",{bubbles:!0});t.dispatchEvent(R);let L=await C.json();console.log(JSON.stringify(L));let G=marked.parse(L.aiResp),x=Y("ai",G);o.insertBefore(x,s),o.querySelectorAll("pre code").forEach(q=>{hljs.highlightElement(q)}),n.classList.add("d-none")}catch(C){console.error("Error:",C)}}),ie(a,d),a.addEventListener("change",async r=>{let h=r.target.options[r.target.selectedIndex].parentNode.label;c.value=V[h][r.target.value]}),d.addEventListener("change",async r=>{$.innerHTML=`<img style="height:23px; width:auto;" src="${K[d.value].img}" alt="Model">`}),t.addEventListener("input",function(){this.style.height="auto";let r=Math.min(this.scrollHeight,window.innerHeight*.4);this.style.height=r+"px"}),Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(r=>{new bootstrap.Tooltip(r)});function u(r){let f=parseInt(v.getAttribute("data-yo-col")),h=r=="up"?f+3:f-3;v.classList.remove("col-"+f),v.classList.add("col-"+h),v.setAttribute("data-yo-col",h)}y.addEventListener("show.bs.collapse",r=>{b.classList.toggle("btn-primary"),b.classList.toggle("btn-outline-primary"),y.classList.toggle("font-zero"),u("down")}),y.addEventListener("hide.bs.collapse",r=>{b.classList.toggle("btn-primary"),b.classList.toggle("btn-outline-primary"),y.classList.toggle("font-zero"),u("up")}),T.addEventListener("show.bs.collapse",r=>{l.classList.toggle("btn-primary"),l.classList.toggle("btn-outline-primary"),l.classList.toggle("font-zero"),u("down")}),T.addEventListener("hide.bs.collapse",r=>{l.classList.toggle("btn-primary"),l.classList.toggle("btn-outline-primary"),l.classList.toggle("font-zero"),u("up")});document.getElementById("bgColor").addEventListener("input",function(){document.body.style.backgroundColor=this.value});let M=document.getElementById("gradientStart"),P=document.getElementById("gradientEnd"),H=document.getElementById("gradientOpacity");M.addEventListener("input",A),P.addEventListener("input",A),H.addEventListener("input",A);function A(){let r=M.value,f=P.value,h=H.value;document.body.style.backgroundImage=`linear-gradient(to right, ${O(r,h)}, ${O(f,h)})`}function O(r,f){let h=parseInt(r.slice(1,3),16),B=parseInt(r.slice(3,5),16),E=parseInt(r.slice(5,7),16);return`rgba(${h}, ${B}, ${E}, ${f})`}});})();
//!-------------------------------------------------------------------!
//!
//!------------------------------------------------------------------------!
